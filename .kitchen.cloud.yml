---
driver_config:
  openstack_username: <%= ENV['OS_USERNAME'] %>
  openstack_api_key: <%= ENV['OS_PASSWORD'] %>
  openstack_auth_url: <%= "#{ENV['OS_AUTH_URL']}/tokens" %>
  key_name: <%= ENV['OS_SSH_KEYPAIR'] %>
  private_key_path: <%= ENV['OS_PRIVATE_SSH_KEY'] %>
  public_key_path: <%= ENV['OS_PUBLIC_SSH_KEY'] %>
  openstack_tenant: <%= ENV['OS_TENANT_NAME'] %>
  floating_ip: <%= ENV['OS_FLOATING_IP'] %>
  floating_ip_pool: <%= ENV['OS_FLOATING_IP_POOL'] %>
  flavor_ref: <%= ENV['OS_FLAVOR_REF'] %>

provisioner:
  name: chef_zero
  attributes:
    authorization:
      sudo:
        users:
          - vagrant
          - centos
        passwordless: true

platforms:
- name: centos-6.6
  driver_plugin: openstack
  driver_config:
    username: centos
    image_ref: "CentOS 6.6"
- name: centos-7.1
  driver_plugin: openstack
  driver_config:
    username: centos
    image_ref: "CentOS 7.1"
- name: fedora-20
  driver_plugin: openstack
  driver_config:
    username: fedora
    image_ref: "Fedora 20"
- name: fedora-21
  driver_plugin: openstack
  driver_config:
    username: fedora
    image_ref: "Fedora 21"

suites:
  - name: default
    run_list:
      - recipe[monitoring::default]
  - name: http
    run_list:
      - recipe[monitoring::http]
  - name: mysql
    run_list:
      - recipe[monitoring::mysql]
  - name: smtp
    run_list:
      - recipe[monitoring::smtp]
  - name: raid-aac
    run_list:
      - recipe[monitoring::raid]
    attributes:
      kernel:
        modules:
          aacraid:
  - name: raid-hp
    run_list:
      - recipe[monitoring::raid]
    attributes:
      kernel:
        modules:
          cciss:
    excludes:
      - fedora-20
      - fedora-21
  - name: raid-megaraid
    run_list:
      - recipe[monitoring::raid]
    attributes:
      kernel:
        modules:
          megaraid_sas:
  - name: raid-mpt
    run_list:
      - recipe[monitoring::raid]
    attributes:
      kernel:
        modules:
          mptctl:
    excludes:
      - centos-7.1
      - fedora-20
      - fedora-21
  - name: raid-md
    run_list:
      - recipe[md-test]
      - recipe[monitoring::raid]
    excludes:
      - centos-6.6
      - centos-7.1
      - fedora-21
